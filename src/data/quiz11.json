[
  {
    "number": "11",
    "question": "Ένα πρόγραμμα Π θα εκτελεστεί σε πέντε διαφορετικούς μικροεπεξεργαστές RISC-V με ονόματα Υ1, Υ2, Υ3, Υ4, Υ5. Κάθε μικροεπεξεργαστής διαθέτει τον δικό του μεταγλωττιστή C1, C2, C3, C4, C5, αντίστοιχα που παράγει εκτελέσιμο κώδικα για το Π που εκτελεί 1.00 δις, 1.10 δις, 1.05 δις, 1.25 δις, 1.17 δις δυναμικές εντολές, αντίστοιχα.\nΟι βασικές μονάδες του υλικού έχουν λανθάνοντες χρόνους (για όλους του επεξεργαστές): Μνήμες=75 ps, ALU=65 ps, Καταχωρητές=55 ps.\nΟ Υ1 διαθέτει απλή σχεδίαση ενός κύκλου ρολογιού.\nΟ Υ2 διαθέτει σχεδίαση πολλών κύκλων ρολογιού με CPI=3 για τις διακλαδώσεις (που αποτελούν το 10% των εντολών), CPI=4 για τις αποθηκεύσεις και τις εντολές τύπου-R (που αποτελούν μαζί το 75% των εντολών) και CPI=5 για τις εντολές φόρτωσης (που είναι οι υπόλοιπες).\nO Y3 διαθέτει διοχέτευση πέντε σταδίων χωρίς προώθηση και μόνο ανιχνεύει τους κινδύνους προσθέτοντας καθυστερήσεις (stalls). Το 45% των εντολών επιβαρύνονται με έναν επιπλέον κύκλο καθυστέρησης λόγω κινδύνων δεδομένων και το 13% με δύο κύκλους καθυστέρησης λόγω κινδύνων ελέγχου.\nΟ Υ4 διαθέτει διοχέτευση πέντε σταδίων με πλήρη προώθηση και γι’ αυτό μόνο το 20% των εντολών επιβαρύνονται με έναν επιπλέον κύκλο καθυστέρησης λόγω κινδύνων δεδομένων. Επειδή διαθέτει και πολύ καλή μονάδα πρόβλεψης διακλάδωσης μόνο το 3% των εντολών επιβαρύνονται με δύο κύκλους καθυστέρησης λόγω κινδύνων ελέγχου.\nΟ Υ5 είναι μια «μαγική» σχεδίαση που εξαφανίζει όλους τους κινδύνους της διοχέτευσης η οποία λειτουργεί ιδανικά.\nΟ Υ1 κοστίζει 10 ευρώ, ο Υ2 κοστίζει 12 ευρώ, ο Υ3 κοστίζει 18 ευρώ, ο Υ4 κοστίζει 25 ευρώ, και ο Υ5 κοστίζει 40 ευρώ.\nΠοιος από τους πέντε μικροεπεξεργαστές δίνει τον καλύτερο λόγο απόδοσης προς κόστος (performance per cost ratio) για το πρόγραμμα Π;",
    "solution": "Για κάθε μικροεπεξεργαστή τα πλήθη των δυναμικών εντολών δίνονται από την εκφώνηση.\nΤο CPI του καθενός υπολογίζεται ως εξής:\n  \\( \\text{CPI}_{\\mathrm{Y1}} = 1.00 (πρόκειται για CPU ενός κύκλου ρολογιού) \\)\n  \\( \\text{CPI}_{\\mathrm{Y2}} = 0.10 \\times 3 + 0.75 \\times 4 + 0.15 \\times 5 = 4.05 \\) (πρόκειται για CPU πολλών κύκλων ρολογιού στην οποία κάθε κατηγορία εντολών διαρκεί 3, 4 ή 5 κύκλους)\n  \\( \\text{CPI}_{\\mathrm{Y3}} = 1 + 0.45 \\times 1 + 0.13 \\times 2 = 1.71 \\) (πρόκειται για CPU με διοχέτευση στην οποία επιβαρύνεται το ιδανικό CPI=1 με επιπλέον κύκλους λόγω κινδύνων δεδομένων και ελέγχου)\n  \\( \\text{CPI}_{\\mathrm{Y4}} = 1 + 0.2 \\times 1 + 0.03 \\times 2 = 1.26 \\) (ομοίως αλλά με λιγότερες καθυστερήσεις αφού είναι πιο προηγμένη σχεδίαση με διοχέτευση)\n  \\( \\text{CPI}_{\\mathrm{Y5}} = 1.00\\) (καμία επιβάρυνση λόγω κινδύνων, η τέλεια διοχέτευση)\n\nΗ διάρκεια του κύκλου ρολογιού για κάθε σχεδίαση υπολογίζεται ως εξής:\n   \\( \\text{Clock-cycle}_{\\mathrm{Y1}}  = (75 + 55 + 65 + 75 + 55) \\times 10^{-12} s \\) (πρόκειται για CPU ενός κύκλου ρολογιού και το ρολόι έχει διάρκεια όσο η πιο αργή εντολή, load, δηλαδή το άθροισμα των χρόνων των πέντε τμημάτων του υλικού)\n    \\( \\text{Clock-cycle}_{\\mathrm{Y2}}  = \\text{max}\\{75, 55, 65, 75, 55\\} \\times 10^{-12} s = 75 \\times 10^{-12} s \\) (στη CPU πολλών κύκλων ρολογιού η διάρκεια του ρολογιού είναι ίση με το πιο αργό από τα πέντε στάδια του υλικού)\n    \\( \\text{Clock-cycle}_{\\mathrm{Y3}}  = max\\{75, 55, 65, 75, 55\\} \\times 10^{-12} s = 75 \\times 10^{-12} s \\) (στη CPU με διοχέτευση η διάρκεια του ρολογιού είναι ίση με το πιο αργό από τα πέντε στάδια του υλικού)\n    \\( \\text{Clock-cycle}_{\\mathrm{Y4}} = 75 \\times 10^{-12} s \\) (ομοίως)\n    \\( \\text{Clock-cycle}_{\\mathrm{Y5}} = 75 \\times 10^{-12} s \\) (ομοίως)\n\nΜε χρήση της βασικής εξίσωσης της απόδοσης\n\\( \\text{Time} = \\text{Instructions} \\times \\text{CPI} \\times \\text{Clock-cycle} \\)\nΥπολογίζουμε τους χρόνους εκτέλεσης του Π στους πέντε μικροεπεξεργαστές\n\\( \\text{Time}_{\\mathrm{Y1}} = 0.3250 s, \\text{Time}_{\\mathrm{Y2}} = 0.3341 s, \\text{Time}_{\\mathrm{Y3}} = 0.1347 s, \\text{Time}_{\\mathrm{Y4}} = 0.1181 s, \\text{Time}_{\\mathrm{Y5}} = 0.0878 s \\)\n\nΟ ζητούμενος λόγος είναι:\nΛ = \\( \\frac{Performance}{Cost} \\) ή Λ = \\( \\frac{1}{ \\text{Time} \\times \\text{Cost}} \\)\n\nΣυνεπώς:\n\\( Λ_{\\mathrm{Y1}} = 0.31 \\)\n\\( Λ_{\\mathrm{Y2}} = 0.25 \\)\n\\( Λ_{\\mathrm{Y3}} = 0.41 \\)\n\\( Λ_{\\mathrm{Y4}} = 0.34 \\)\n\\( Λ_{\\mathrm{Y5}} = 0.28 \\)\nΝικητής είναι ο μικροεπεξεργαστής Υ3 που παρέχει τον υψηλότερο λόγο Λ.",
    "answers": [
      {
        "text": "ο Υ1",
        "correct": false
      },
      {
        "text": "ο Υ2",
        "correct": false
      },
      {
        "text": "ο Υ3",
        "correct": true
      },
      {
        "text": "ο Υ4",
        "correct": false
      },
      {
        "text": "ο Υ5",
        "correct": false
      },
      {
        "text": "άλλο",
        "correct": false
      }
    ]
  }
]
