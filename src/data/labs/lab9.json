[
  {
    "id": "9_1",
    "title": "E9.2 Διοχέτευση χωρίς μονάδα ελέγχου κινδύνων",
    "question": "Θα δοκιμάσουμε το ίδιο (`lab9.s` από το eclass) πρόγραμμα αλλά σε έναν διαφορετικό επεξεργαστή που υποστηρίζει διοχέτευση αλλά δεν διαθέτει μονάδα ελέγχου κινδύνων.\n\n**αʹ.** Δημιουργήστε νέα προσομοίωση πατώντας το .\n**βʹ.** Στην κατηγορία «Presets and ELF File» της Εικόνας 14 επιλέξτε «Custom».\n\n**γʹ.** Επιλέξτε την κατηγορία «Core ISA and Hazards» και ενεργοποιήστε το «Pipelined» και απενεργοποιήστε το «Hazard Unit». Πατήστε Start empty.\n\n**δʹ.** Φορτώστε τον κώδικα και μεταγλωττίστε τον.\n\nΤρέξτε το πρόγραμμα. Τι παρατηρείτε;\n\nΗ λανθασμένη εκτέλεση του προγράμματος οφείλεται στο γεγονός ότι οι κίνδυνοι δεδομένων δεν αντιμετωπίζονται. Αλλάζοντας μόνο τον κώδικα, προσπαθήστε να πάρετε τα σωστά αποτελέσματα στον συγκεκριμένο επεξεργαστή.",
    "solution": "Τρέχοντας την προσομοίωση χωρίς το Hazarad Unit ενεργοποιημένο, προκύπτει λάθος αποτέλεσμα. Πιο συγκεκριμένα, ο καταχωρητής `s4` που περιέχει το αποτέλεσμα, στη πραγματικότηττα, περιέχει \"σκουπίδια\" (0x20e8e30f).\n\n```\n# E9 \n   .org 0x200\n    .text\n    .globl _start\n\n_start:\n    auipc x8, 0x0\n    add zero, zero, zero\n    add zero, zero, zero\n\n    addi x8, x8, 512\n\n    auipc x9, 0x0\n    add zero, zero, zero\n    add zero, zero, zero\n    addi x9, x9, 632\n\n    li s2, 32               # size\n    li s3, 0                # index\n    li s4, 0                # sum\n\nloop:\n    slli t0, s3, 2          # offset = index*4\n    add zero, zero, zero\n    add zero, zero, zero\n\n    add t1, s0, t0          # &vector0[index]\n    add zero, zero, zero\n    add zero, zero, zero\n    lw s5, 0(t1)\n\n    add t2, s1, t0          # &vector1[index]\n    add zero, zero, zero\n    add zero, zero, zero\n\n    lw s6, 0(t2)\n    add zero, zero, zero\n    add zero, zero, zero\n\n    mul s7, s5, s6          # vector0[index] * vector1[index]\n    add zero, zero, zero\n    add zero, zero, zero\n\n    add s4, s4, s7\n    addi s3, s3, 1\n    add zero, zero, zero\n    add zero, zero, zero\n\n    bne s3, s2, loop\n    add zero, zero, zero\n    add zero, zero, zero\nexit:\n    ebreak\n\n\n\n    .org 0x400\n    .data\nvector0:    .word    1, 0, 1, 0, 1, 0, 1, 0, 1, 0\n            .word    1, 0, 1, 0, 1, 0, 1, 0, 1, 0\n            .word    1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0\nvector1:    .word    0, 0, 1, 0, 0, 0, 1, 0, 0, 0\n            .word    1, 0, 0, 0, 1, 0, 0, 0, 1, 0\n            .word    0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0\n```"
  }
]
